<?xml version="1.0" encoding="utf-8"?>

<creole>
    <files>
        <file name='/usr/share/eole/firewall/00_dns.fw'/>
    </files>
    <containers>
        <container name="dns" id='18'>
            <package>dns-pkg</package>
            <service>bind9</service>
            <file name='/etc/bind/spcl.options'/>
            <file filelist='agriates' name='/etc/bind/agriates.zones'/>
            <!-- remonter de logs vers le maitre -->
            <file name='/etc/rsyslog.d/50-default.conf' source="50-default-conteneur.conf" container_only="True"/>
        </container>
    </containers>
    <!--************************************************************************************************* -->
    <variables>
        <family name='Interface-1'>
            <variable name='dns_master_eth1' type='oui/non' description="Amon master DNS de cette zone ?" >
                <value>oui</value>
            </variable>
        </family>
        <family name='Interface-2'>
            <variable name='dns_master_eth2' type='oui/non' description="Amon master DNS de cette zone ?" >
                <value>oui</value>
            </variable>
        </family>
        <family name='Interface-3'>
            <variable name='dns_master_eth3' type='oui/non' description="Amon master DNS de cette zone ?" >
                <value>oui</value>
            </variable>
        </family>
        <family name='Interface-4'>
            <variable name='dns_master_eth4' type='oui/non' description="Amon master DNS de cette zone ?" >
                <value>oui</value>
            </variable>
        </family>
        <family name='zones-dns' mode='expert'>
            <variable name='adresse_ip_conteneur_dns' type='ip' hidden='True' description="Adresse IP du conteneur DNS"/>
            <variable name='nom_domaine_local_supp' type='string' description='Nom domaine local supplémentaire ou rien' multi='True' />
            <variable name='nom_zone_forward' type='string' description='Nom DNS de la zone' multi='True' />
            <variable name='ip_dns_zone_forward' type='ip' description='Adresse IP du serveur DNS de la zone' />
            <variable name='nom_host_dns' type='string' description='Nom DNS complet de la machine à ajouter dans le DNS' multi='True' />
            <variable name='ip_host_dns' type='ip' description='Adresse IP de la machine à ajouter dans le DNS' />
        </family>
        <family name='rvp' hidden='True'>
            <variable name='agriates_member' exists='False' type='oui/non' hidden='True'>
                <value>non</value>
            </variable>
            <variable name='adresse_dns_agriates' type='ip' description='Adresse du DNS permettant de resoudre les in.ac-acad.fr' multi='True'/>
        </family>
        <separators>
            <separator name='dns_master_eth0'>Configuration DNS sur l'interface</separator>
            <separator name='dns_master_eth1'>Configuration DNS sur l'interface</separator>
            <separator name='dns_master_eth2'>Configuration DNS sur l'interface</separator>
            <separator name='dns_master_eth3'>Configuration DNS sur l'interface</separator>
            <separator name='dns_master_eth4'>Configuration DNS sur l'interface</separator>
            <separator name='nom_host_dns'>Ajout d'hôtes dans le DNS</separator>
            <separator name='nom_zone_forward'>Forward de zone DNS</separator>
        </separators>
    </variables>
    <constraints>
        <auto name='calc_container' target='adresse_ip_conteneur_dns'>
            <param>container_ip_dns</param>
        </auto>
        <group master='nom_host_dns'>
            <slave>ip_host_dns</slave>
        </group>
        <group master='nom_zone_forward'>
            <slave>ip_dns_zone_forward</slave>
        </group>
        <condition name='hidden_if_in' source='nom_zone_forward'>
            <param>non</param>
            <target type='variable'>ip_dns_zone_forward</target>
        </condition>
        <condition name='hidden_if_in' source='agriates_member'>
            <param>non</param>
            <target type='variable'>adresse_dns_agriates</target>
            <target type='filelist'>agriates</target>
        </condition>
    </constraints>
    <help/>
</creole>
<!-- vim: ts=4 sw=4 expandtab
-->
