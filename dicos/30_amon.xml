<?xml version="1.0" encoding="utf-8"?>

<creole>

    <files>
        <!--<file name='/etc/chkrootkit.conf'/>-->
        <file name='/etc/host.conf'/>
        <file name='/etc/logrotate.conf'/>
        <file name='/etc/sudoers.d/amon' source='amon.sudo' mode="0440"/>
        <file name='/usr/share/era/backend/data/active_tags'/>
        <file name='/etc/cron.d/amon-firewall' source='cron-root'/>
    </files>

    <variables>

        <family name='general'>
            <!--**** Reseau Global **** -->
            <variable name='type_amon' type='string' description='Modèle de filtrage'>
                <value>2zones</value>
            </variable>
            <variable name='nombre_interfaces' redefine='True'>
                <value>2</value>
            </variable>
            <variable name='nom_machine' redefine='True'>
                <value>amon</value>
            </variable>
            <variable name='install_scribe_dmz' type='oui/non' description="Activer la gestion d'un Scribe dans la DMZ" >
                <value>non</value>
            </variable>
            <!-- ajoute adresses_ip_clients_nfs pour extermite Era #3594 -->
            <variable name='adresses_ip_clients_nfs' type='ip' exists='False' hidden='True'/>
        </family>

        <family name='Interface-0'>
            <variable name='eth0_method' redefine='True' />
        </family>
        <family name='Interface-1'>
            <!-- exists="False" : cf. eole-proxy -->
            <variable name='nom_machine_eth1' type='string' description="Nom à donner à l'interface (pour résolution DNS)" exists="False">
                <value>admin</value>
            </variable>
        </family>
        <family name='Interface-2' hidden='True'>
            <variable name='nom_machine_eth2' type='string' description="Nom à donner à l'interface (pour resolution DNS)" >
                <value>pedago</value>
            </variable>
        </family>
        <family name='Interface-3' hidden='True'>
            <variable name='nom_machine_eth3' type='string' description="Nom à donner à l'interface (pour resolution DNS)" >
                <value>dmz-priv</value>
            </variable>
        </family>
        <family name='Interface-4' hidden='True'>
            <variable name='nom_machine_eth4' type='string' description="Nom à donner à l'interface (pour resolution DNS)" >
                <value>dmz-pub</value>
            </variable>
        </family>

        <family name='réseau avancé' mode='expert'>
            <!-- est remplacé par Zones-DNS sur Amon (#2795) -->
            <variable name='activer_ajout_hosts' redefine='True' hidden='True'/>
        </family>

        <family name='Scribe-DMZ' hidden='True'>
            <variable name='nom_serveur_scribe_dmz' type='string' description='Nom du Scribe dans la DMZ (pour enregistrement DNS)' />
            <variable name='ip_serveur_scribe_dmz' type='ip' description='Adresse IP du Scribe dans la DMZ' />
        </family>

        <separators>
            <separator name='nom_cache_pere'>Proxy pere general</separator>
            <separator name='nom_domaine_local_supp'>Ajout de domaines locaux supplémentaires (DNS master sur ces domaines)</separator>
        </separators>

    </variables>

    <constraints>

        <check name='obligatoire' target='type_amon'/>
        <check name='obligatoire' target='nom_machine_eth1'/>
        <check name="valid_enum" target="type_amon">
            <param type="python">eosfunc.list_files('/usr/share/era/modeles', '*.xml', True, default=['2zones', '2zones-amonecole', '2zones-amonecole-nginx', '3zones', '3zones-scribe', '3zones-scribe-nginx', '4zones', '4zones-scribe', '4zones-scribe-nginx', '4zones-scribe-nufw', '5zones'], exception='minimal')</param>
            <param name="checkval">False</param>
        </check>
        <!-- Amon >= 2 cartes réseau -->
        <check name="valid_enum" target="nombre_interfaces">
            <param>['2','3','4','5']</param>
        </check>
        <check name="valid_enum" target="eth0_method">
            <param>['statique','dhcp','pppoe']</param>
        </check>
        <condition name='hidden_if_in' source='install_scribe_dmz'>
            <param>non</param>
            <target type='family'>Scribe-DMZ</target>
        </condition>

    </constraints>

    <help/>

</creole>
<!-- vim: ts=4 sw=4 expandtab
-->
