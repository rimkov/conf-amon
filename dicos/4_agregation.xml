<?xml version='1.0' encoding='utf-8'?>

<creole>
        <files>
		<file filelist='agregation' name='/etc/agregation.conf'/>
        </files>
		<!-- **** Dictionnaire optionnel (Ageregation) de l'Academie de Nantes by GC **** -->
        <variables>
			<family name='Agregation' mode='expert'>
			<variable name='agregation' type='string' description='Repartition de charges entre 2 lignes' >
				<value>non</value>
			</variable>
			<variable name='ag_force_eth0' type='ip' description='Destination(s) forcées sur le lien 1' multi='True'/>
			<variable name='ag_dns_eth0' type='ip' description='Adresse(s) du(des) dns sur le lien 1' multi='True'/>
			<variable name='ag_weight_eth0' type='string' description='Debit mesure sur le lien 1 (entier en Mbps)' />
			<variable name='ag_force_eth0_0' type='ip' description='Destination(s) forcées sur le lien 2' multi='True'/>
			<variable name='ag_dns_eth0_0' type='ip' description='Adresse(s) du(des) dns sur le lien 2' multi='True'/>
			<variable name='ag_weight_eth0_0' type='string' description='Débit mesuré sur le lien 2 (entier en Mbps)' />
			<variable name='ag_pause' type='Number' description="Délai entre les tests d'état (en secondes)" >
				<value>10</value>
			</variable>
			<variable name='ag_timeout' type='Number' description='Timeout de la requête DNS (en secondes)' >
				<value>1</value>
			</variable>
			<variable name='ag_testdns' type='string' description='Première Adresse DNS testée' >
				<value>www.google.com</value>
			</variable>
			<variable name='ag_testdns2' type='string' description='Seconde Adresse DNS testée' >
				<value>www.ac-nantes.fr</value>
			</variable>
			<variable name='ag_nbsucces' type='Number' description="Nombre de succès avant changement d'état" >
				<value>4</value>
			</variable>
			<variable name='ag_nbechecs' type='Number' description="Nombre d'echecs avant changement d'état" >
				<value>1</value>
			</variable>
		</family>
			<separators>
				<separator name='agregation'>Agregation de liens</separator>
				<separator name='ag_force_eth0'>Lien 1</separator>
				<separator name='ag_force_eth0_0'>Lien 2</separator>
				<separator name='ag_pause'>Divers</separator>				
			</separators> 
        </variables>
        <constraints>
		<condition name='hidden_if_in' source='agregation'>
			<param>non</param> 
			<target type='variable'>ag_force_eth0</target>
			<target type='variable'>ag_dns_eth0</target>
			<target type='variable'>ag_weight_eth0</target>
			<target type='variable'>ag_force_eth0_0</target>
			<target type='variable'>ag_dns_eth0_0</target>
			<target type='variable'>ag_weight_eth0_0</target>
			<target type='variable'>ag_pause</target>
			<target type='variable'>ag_timeout</target>
			<target type='variable'>ag_testdns</target>
			<target type='variable'>ag_testdns2</target>
			<target type='variable'>ag_nbsucces</target>
			<target type='variable'>ag_nbechecs</target>
			<target type='filelist'>agregation</target>
		</condition>
		<check name="valid_enum" target='agregation'>
			<param>['non','oui']</param>
		</check>
		</constraints>
		<help>
        </help>
</creole>
