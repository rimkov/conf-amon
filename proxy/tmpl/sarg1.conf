# sarg.conf
#
# TAG:  language 
#	Available languages:
#		Bulgarian_windows1251
#		Catalan
#		Czech
#		Dutch
#		English
#		French
#		German
#		Greek
#		Hungarian
#		Indonesian
#		Italian
#		Japanese
#		Latvian
#		Polish
#		Portuguese
#		Romanian
#		Russian_koi8
#		Russian_UFT-8
#		Russian_windows1251
#		Serbian
#		Slovak
#		Spanish
#		Turkish
#
%if %%is_defined('language') and %%language != ''
language %%language
%end if

# TAG:  access_log file
#       Where is the access.log file
#       sarg -l file
#
#access_log /var/log/squid/access.log
access_log /var/log/dansguardian/access0.log

# TAG: graphs yes|no
#	Use graphics where is possible.
#           graph_days_bytes_bar_color blue|green|yellow|orange|brown|red
#
%if %%is_defined('graphs') and %%graphs != ''
graphs %%graphs
%end if
%if %%is_defined('graph_days_bytes_bar_color') and %%graph_days_bytes_bar_color != ''
graph_days_bytes_bar_color %%graph_days_bytes_bar_color
%end if

# TAG:	title
# 	Especify the title for html page.
#
%if %%is_defined('title') and %%title != ''
title "%%title"
%end if

# TAG:	font_face
# 	Especify the font for html page.
#
%if %%is_defined('font_face') and %%font_face != ''
font_face %%font_face
%end if

# TAG:	header_color
# 	Especify the header color
#
%if %%is_defined('header_color') and %%header_color != ''
header_color %%header_color
%end if

# TAG:	header_bgcolor
# 	Especify the header bgcolor
#
%if %%is_defined('header_bgcolor') and %%header_bgcolor != ''
header_bgcolor %%header_bgcolor
%end if

# TAG:	font_size
# 	Especify the text font size
#
%if %%is_defined('font_size') and %%font_size != ''
font_size %%font_size
%end if

# TAG:	header_font_size
# 	Especify the header font size
#
%if %%is_defined('header_font_size') and %%header_font_size != ''
header_font_size %%header_font_size
%end if

# TAG:	title_font_size
# 	Especify the title font size
#
%if %%is_defined('title_font_size') and %%title_font_size != ''
title_font_size %%title_font_size
%end if

# TAG:	background_color
# TAG:	background_color
#	Html page background color
#
%if %%is_defined('background_color') and %%background_color != ''
background_color %%background_color
%end if

# TAG:	text_color
#	Html page text color
#
%if %%is_defined('text_color') and %%text_color != ''
text_color %%text_color
%end if

# TAG:	text_bgcolor
#	Html page text background color
#
%if %%is_defined('text_bgcolor') and %%text_bgcolor != ''
text_bgcolor %%text_bgcolor
%end if

# TAG:	title_color
#	Html page title color
#
%if %%is_defined('title_color') and %%title_color != ''
title_color %%title_color
%end if

# TAG:	logo_image
#	Html page logo.
#
%if %%is_defined('logo_image') and %%logo_image != ''
logo_image %%logo_image
%end if

# TAG:	logo_text
#	Html page logo text.
#
%if %%is_defined('logo_text') and %%logo_text != ''
logo_text "%%logo_text"
%end if

# TAG:	logo_text_color
#	Html page logo texti color.
#
%if %%is_defined('logo_text_color') and %%logo_text_color != ''
logo_text_color %%logo_text_color
%end if

# TAG:	logo_image_size
#	Html page logo image size. 
#       width height
#
#image_size 80 45

# TAG:	background_image
#	Html page background image
#
%if %%is_defined('background_image') and %%background_image != ''
background_image %%background_image
%end if

# TAG:  password
#       User password file used by authentication
#       If used here, reports will be generated only for that users.
#
#password none

# TAG:  temporary_dir
#       Temporary directory name for work files
#       sarg -w dir
#
%if %%is_defined('temporary_dir') and %%temporary_dir != ''
temporary_dir %%temporary_dir
%end if

# TAG:  output_dir
#       The reports will be saved in that directory
#       sarg -o dir
#
#output_dir /var/www/html/squid-reports
output_dir /var/log/squid-reports/0

# TAG:  output_email
#       Email address to send the reports. If you use this tag, no html reports will be generated.
#       sarg -e email
#
%if %%is_defined('output_email') and %%output_email != ''
output_email %%output_email
%end if

# TAG:  resolve_ip yes/no
#       Convert ip address to dns name
#       sarg -n
%if %%is_defined('resolve_ip') and %%resolve_ip != ''
resolve_ip %%resolve_ip
%end if

# TAG:  user_ip yes/no
#       Use Ip Address instead userid in reports.
#       sarg -p
%if %%is_defined('user_ip') and %%user_ip != ''
user_ip %%user_ip
%end if

# TAG:  topuser_sort_field field normal/reverse
#       Sort field for the Topuser Report.
#       Allowed fields: USER CONNECT BYTES TIME
#
%if %%is_defined('topuser_sort_field') and %%topuser_sort_field != ''
topuser_sort_field %%topuser_sort_field
%end if

# TAG:  user_sort_field field normal/reverse
#       Sort field for the User Report.
#       Allowed fields: SITE CONNECT BYTES TIME
#
%if %%is_defined('user_sort_field') and %%user_sort_field != ''
user_sort_field %%user_sort_field
%end if

# TAG:  exclude_users file
#       users within the file will be excluded from reports.
#       you can use indexonly to have only index.html file.
#
exclude_users /etc/squid/sarg.users

# TAG:  exclude_hosts file
#       Hosts, domains or subnets will be excluded from reports.
#
#       Eg.: 192.168.10.10 - exclude ip address only
#            192.168.10.0  - exclude full C class
#            s1.acme.foo   - exclude hostname only
#            acme.foo      - exclude full domain name
#
exclude_hosts /etc/squid/sarg.hosts

# TAG:  useragent_log file
#       useragent.log file patch to generate useragent report.
#
%if %%is_defined('useragent_log') and %%useragent_log != ''
useragent_log %%useragent_log
%end if

# TAG:  date_format
#       Date format in reports: e (European=dd/mm/yy), u (American=mm/dd/yy), w (Weekly=yy.ww)
#       
%if %%is_defined('date_format') and %%date_format != ''
date_format %%date_format
%end if

# TAG:  per_user_limit file MB
#       Saves userid on file if download exceed n MB.
#       This option allow you to disable user access if user exceed a download limit.
#       
%if %%is_defined('per_user_limit') and %%per_user_limit != ''
per_user_limit %%per_user_limit
%end if

# TAG: lastlog n
#      How many reports files must be keept in reports directory.
#      The oldest report file will be automatically removed.
#      0 - no limit.
#
%if %%is_defined('lastlog') and %%lastlog != ''
lastlog %%lastlog
%end if

# TAG: remove_temp_files yes
#      Remove temporary files: geral, usuarios, top, periodo from root report directory.
#
%if %%is_defined('remove_temp_files') and %%remove_temp_files != ''
remove_temp_files %%remove_temp_files
%end if

# TAG: index yes|no|only
#      Generate the main index.html.
#      only - generate only the main index.html
#
%if %%is_defined('index') and %%index != ''
index %%index
%end if

# TAG: index_tree date|file
#      How to generate the index.
#
%if %%is_defined('index_tree') and %%index_tree != ''
index_tree %%index_tree
%end if

# TAG: overwrite_report yes|no
#      yes - if report date already exist then will be overwrited.
#       no - if report date already exist then will be renamed to filename.n, filename.n+1
#
%if %%is_defined('overwrite_report') and %%overwrite_report != ''
overwrite_report %%overwrite_report
%end if

# TAG: records_without_userid ignore|ip|everybody
#      What can I do with records without user id (no authentication) in access.log file ?
#
#      ignore - This record will be ignored.
#          ip - Use ip address instead. (default)
#   everybody - Use "everybody" instead.
#
%if %%is_defined('records_without_userid') and %%records_without_userid != ''
records_without_userid %%records_without_userid
%end if

# TAG: use_comma no|yes
#      Use comma instead point in reports.
#      Eg.: use_comma yes => 23,450,110
#           use_comma no  => 23.450.110
#
%if %%is_defined('use_comma') and %%use_comma != ''
use_comma %%use_comma
%end if

# TAG: mail_utility mail|mailx
#      Mail command to use to send reports via SMTP
#
%if %%is_defined('mail_utility') and %%mail_utility != ''
mail_utility %%mail_utility
%end if

# TAG: topsites_num n
#      How many sites in topsites report.
#
%if %%is_defined('topsites_num') and %%topsites_num != ''
topsites_num %%topsites_num
%end if

# TAG: topsites_sort_order CONNECT|BYTES A|D
#      Sort for topsites report, where A=Ascendent, D=Descendent
#
%if %%is_defined('topsites_sort_order') and %%topsites_sort_order != ''
topsites_sort_order %%topsites_sort_order
%end if

# TAG: index_sort_order A/D
#      Sort for index.html, where A=Ascendent, D=Descendent
#
%if %%is_defined('index_sort_order') and %%index_sort_order != ''
index_sort_order %%index_sort_order
%end if

# TAG: exclude_codes file
#      Ignore records with these codes. Eg.: NONE/400
#
exclude_codes /etc/squid/sarg.exclude_codes

# TAG: replace_index string
#      Replace "index.html" in the main index file with this string
#      If null "index.html" is used 
#
#replace_index <?php echo str_replace(".", "_", $REMOTE_ADDR); echo ".html"; ?>
%if %%is_defined('replace_index') and %%replace_index != ''
replace_index %%replace_index
%end if

# TAG: max_elapsed milliseconds
#      If elapsed time is recorded in log is greater than max_elapsed use 0 for elapsed time.
#      Use 0 for no checking 
#
#max_elapsed 0
# 8 Hours
%if %%is_defined('max_elapsed') and %%max_elapsed != ''
max_elapsed %%max_elapsed
%end if

# TAG: report_type type
#      What kind of reports to generate.
#      topusers            - users, sites, times, bytes, connects, links to accessed sites, etc
#      topsites		   - site, connect and bytes report
#      sites_users	   - users and sites report
#      users_sites	   - accessed sites by the user report
#      date_time	   - bytes used per day and hour report
#      denied		   - denied sites with full URL report
#      auth_failures       - autentication failures report
#      site_user_time_date - sites, dates, times and bytes report
#      downloads           - downloads per user report
#
#      Eg.: report_type topsites denied 
#
#report_type topusers topsites sites_users users_sites date_time denied auth_failures site_user_time_date downloads
%if %%is_defined('report_type') and %%report_type != ''
report_type %%report_type
%end if

# TAG: usertab filename
#      You can change the "userid" or the "ip address" to be a real user name on the reports.
#      Table syntax:
# 		userid name   or   ip address name
#      Eg:
#		SirIsaac Isaac Newton
#		vinci Leonardo da Vinci
#		192.168.10.1 Karol Wojtyla
#      
#      Each line must be terminated with '\n'
#
usertab /etc/squid/sarg.usertab

# TAG: long_url yes|no
#      If yes, the full url is showed in report.
#      If no, only the site will be showed
#
#      YES option generate very big sort files and reports.
#
%if %%is_defined('long_url') and %%long_url != ''
long_url %%long_url
%end if

# TAG: date_time_by bytes|elap
#      Date/Time reports will use bytes or elapsed time?
#
%if %%is_defined('date_time_by') and %%date_time_by != ''
date_time_by %%date_time_by
%end if

# TAG: charset name
#      ISO 8859 is a full series of 10 standardized multilingual single-byte coded (8bit)
#      graphic character sets for writing in alphabetic languages
#      You can use the following charsets:
#		Latin1 		- West European
#		Latin2 		- East European 
#		Latin3 		- South European 
#		Latin4 		- North European 
#		Cyrillic 
#		Arabic 
#		Greek 
#		Hebrew 
#		Latin5 		- Turkish 
#		Latin6
#		Windows-1251
#		Koi8-r
#
%if %%is_defined('charset') and %%charset != ''
charset %%charset
%end if

# TAG: user_invalid_char "&/"
#      Records that contain invalid characters in userid will be ignored by Sarg.
#
#user_invalid_char "&/"

# TAG: privacy yes|no
#      privacy_string "***.***.***.***"
#      privacy_string_color blue
#      In some countries the sysadm cannot see the visited sites by a restrictive law.
#      Using privacy yes the visited url will be changes by privacy_string and the link
#      will be removed from reports.
#
#privacy no
#privacy_string "***.***.***.***"
#privacy_string_color blue

# TAG: include_users "user1:user2:...:usern"
#      Reports will be generated only for listed users.
#
#include_users none

# TAG: exclude_string "string1:string2:...:stringn"
#      Records from access.log file that contain one of listed strings will be ignored.
#
#exclude_string none

# TAG: show_successful_message yes|no
#      Shows "Successful report generated on dir" at end of process.
#
%if %%is_defined('show_successful_message') and %%show_successful_message != ''
show_successful_message %%show_successful_message
%end if

# TAG: show_read_statistics yes|no
#      Shows some reading statistics.
#
%if %%is_defined('show_read_statistics') and %%show_read_statistics != ''
show_read_statistics %%show_read_statistics
%end if

# TAG: topuser_fields
#      Which fields must be in Topuser report.
#
%if %%is_defined('topuser_fields') and %%topuser_fields != ''
topuser_fields %%topuser_fields
%end if

# TAG: user_report_fields
#      Which fields must be in User report.
#
%if %%is_defined('user_report_fields') and %%user_report_fields != ''
user_report_fields %%user_report_fields
%end if

# TAG: topuser_num n
#      How many users in topsites report. 0 = no limit
#
%if %%is_defined('topuser_num') and %%topuser_num != ''
topuser_num %%topuser_num
%end if

# TAG: site_user_time_date_type list|table
#      generate reports for site_user_time_date in list or table format
#
%if %%is_defined('site_user_time_date_type') and %%site_user_time_date_type != ''
site_user_time_date_type %%site_user_time_date_type
%end if

# TAG: datafile file
#      Save the report results in a file to populate some database
#
%if %%is_defined('datafile') and %%datafile != ''
datafile %%datafile
%end if

# TAG: datafile_delimiter ";"
#      ascii character to use as a field separator in datafile
#
%if %%is_defined('datafile_delimiter') and %%datafile_delimiter != ''
datafile_delimiter "%%datafile_delimiter"
%end if

# TAG: datafile_fields all
#      Which data fields must be in datafile
#      user;date;time;url;connect;bytes;in_cache;out_cache;elapsed
#
%if %%is_defined('datafile_fields') and %%datafile_fields != ''
datafile_fields %%datafile_fields
%end if

# TAG: datafile_url ip|name
#      Saves the URL as ip or name in datafile
#
%if %%is_defined('datafile_url') and %%datafile_url != ''
datafile_url %%datafile_url
%end if

# TAG: weekdays
#      The weekdays to take account ( Sunday->0, Saturday->6 )
# Example:
#weekdays 1-3,5
# Default:
%if %%is_defined('weekdays') and %%weekdays != ''
weekdays %%weekdays
%end if

# TAG: hours
#      The hours to take account
# Example:
#hours 7-12,14,16,18-20
# Default:
%if %%is_defined('hours') and %%hours != ''
hours %%hours
%end if

# TAG: dansguardian_conf file
#      DansGuardian.conf file path
#      Generate reports from DansGuardian logs.
#      Use 'none' to disable it.
#      dansguardian_conf /usr/dansguardian/dansguardian.conf
#
%if %%is_defined('dansguardian_conf') and %%dansguardian_conf != ''
dansguardian_conf %%dansguardian_conf
%end if

# TAG: dansguardian_ignore_date on|off
#      Use 'on'  use the record even the date range is different from the used squid access.log file.
#      Use 'off' use the record only if the date range is in the used squid access.log file.
#
%if %%is_defined('dansguardian_ignore_date') and %%dansguardian_ignore_date != ''
dansguardian_ignore_date %%dansguardian_ignore_date
%end if

# TAG: squidguard_conf file
#      path to squidGuard.conf file
#      Generate reports from SquidGuard logs.
#      Use 'none' to disable.
#      You can use sarg -L filename to use an alternate squidGuard log.
#      squidguard_conf /usr/local/squidGuard/squidGuard.conf
#
%if %%is_defined('squidguard_conf') and %%squidguard_conf != ''
squidguard_conf %%squidguard_conf
%end if

# TAG: squidguard_ignore_date on|off
#      Use 'on'  use the record even the date range is different from the used squid access.log file.
#      Use 'off' use the record only if the date range is in the used squid access.log file.
#
%if %%is_defined('squidguard_ignore_date') and %%squidguard_ignore_date != ''
squidguard_ignore_date %%squidguard_ignore_date
%end if

# TAG: squidguard_log_format
#      Format string SquidGuard logs.
#      REJIK       #year#-#mon#-#day# #hour# #list#:#tmp# #ip# #user# #tmp#/#tmp#/#url#/#end#
#      SQUIDGUARD  #year#-#mon#-#day# #hour# #tmp#/#list#/#tmp#/#tmp#/#url#/#tmp# #ip#/#tmp# #user# #end#
%if %%is_defined('squidguard_log_format') and %%squidguard_log_format != ''
squidguard_log_format %%squidguard_log_format
%end if

# TAG: show_sarg_info yes|no
#      shows sarg information and site path on each report bottom
#
%if %%is_defined('show_sarg_info') and %%show_sarg_info != ''
show_sarg_info %%show_sarg_info
%end if

# TAG: show_sarg_logo yes|no
#      shows sarg logo
#
%if %%is_defined('show_sarg_logo') and %%show_sarg_logo != ''
show_sarg_logo %%show_sarg_logo
%end if

# TAG: parsed_output_log directory
#      Saves the processed log in a sarg format after parsing the squid log file.
#      This is a way to dump all of the data structures out, after parsing from 
#      the logs (presumably this data will be much smaller than the log files themselves),
#      and pull them back in for later processing and merging with data from previous logs.
#
%if %%is_defined('parsed_output_log') and %%parsed_output_log != ''
parsed_output_log %%parsed_output_log
%end if

# TAG: parsed_output_log_compress /bin/gzip|/usr/bin/bzip2|nocompress
#      sarg logs compress util
#
%if %%is_defined('parsed_output_log_compress') and %%parsed_output_log_compress != ''
parsed_output_log_compress %%parsed_output_log_compress
%end if

# TAG: displayed_values bytes|abbreviation
#      how the values will be displayed in reports.
#      eg. bytes  	-  209.526
#          abbreviation -  210K
#
%if %%is_defined('displayed_values') and %%displayed_values != ''
displayed_values %%displayed_values
%end if

# Report limits
# TAG: authfail_report_limit n
# TAG: denied_report_limit n
# TAG: siteusers_report_limit n
# TAG: squidguard_report_limit n
# TAG: user_report_limit n
# TAG: dansguardian_report_limit n
# TAG: download_report_limit n
#      report limits (lines).
#      '0' no limit
#
%if %%is_defined('authfail_report_limit') and %%authfail_report_limit != ''
authfail_report_limit %%authfail_report_limit
%end if
%if %%is_defined('denied_report_limit') and %%denied_report_limit != ''
denied_report_limit %%denied_report_limit
%end if
%if %%is_defined('siteusers_report_limit') and %%siteusers_report_limit != ''
siteusers_report_limit %%siteusers_report_limit
%end if
%if %%is_defined('squidguard_report_limit') and %%squidguard_report_limit != ''
squidguard_report_limit %%squidguard_report_limit
%end if
%if %%is_defined('dansguardian_report_limit') and %%dansguardian_report_limit != ''
dansguardian_report_limit %%dansguardian_report_limit
%end if
%if %%is_defined('user_report_limit') and %%user_report_limit != ''
user_report_limit %%user_report_limit
%end if
%if %%is_defined('user_report_limit') and %%user_report_limit != ''
user_report_limit %%user_report_limit
%end if

# TAG: www_document_root dir
#     Where is your Web DocumentRoot
#     Sarg will create sarg-php directory with some PHP modules:
#     - sarg-squidguard-block.php - add urls from user reports to squidGuard DB
#
%if %%is_defined('www_document_root') and %%www_document_root != ''
www_document_root %%www_document_root
%end if

# TAG: block_it module_url
#     This tag allow you to pass urls from user reports to a cgi or php module,
#     to be blocked by some Squid acl
#
#     Eg.: block_it /sarg-php/sarg-block-it.php
#     sarg-block-it is a php that will append a url to a flat file.
#     You must change /var/www/html/sarg-php/sarg-block-it to point to your file
#     in $filename variable, and chown to a httpd owner.
#
#     sarg will pass http://module_url?url=url
#
%if %%is_defined('block_it') and %%block_it != ''
block_it %%block_it
%end if

# TAG: external_css_file path
#     This tag allow internal sarg css override.
#     Sarg use theses style classes:
#     	.body		body class
#	.info		sarg information class, align=center
#	.title		title class, align=center
#	.header		header class, align:left
#	.header2	header class, align:right
#	.header3	header class, align:right
#	.text		text class, align:left
#	.data		table text class, align:right
#	.data2		table text class, align:right, border colors
#	.link  		link class
#
#     There is a sample in /usr/local/sarg/etc/css.tpl
#
%if %%is_defined('external_css_file') and %%external_css_file != ''
external_css_file %%external_css_file
%end if

# TAG: user_authentication yes|no
#     Allow user authentication in User Reports using .htaccess
#     Parameters:  
#	AuthUserFile 	- where the user password file is
#	AuthName	- authentication realm. Eg "Members Only"
#	AuthType	- authenticaion type - basic
#	Require		- authorized users to see the report.
#                                          %u - user report
#
# user_authentication no
# AuthUserFile /usr/local/sarg/passwd
# AuthName "SARG, Restricted Access"
# AuthType Basic
# Require user admin %u

# TAG: download_suffix "suffix,suffix,...,suffix"
#    file suffix to be considered as "download" in Download report.
#    Use 'none' to disable.    
#
%if %%is_defined('download_suffix') and %%download_suffix != ''
download_suffix "%%download_suffix"
%end if

# TAG: ulimit n
#    The maximum number of open file descriptors to avoid "Too many open files" error message.
#    You need to run sarg as root to use ulimit tag.
#
%if %%is_defined('ulimit') and %%ulimit != ''
ulimit %%ulimit
%end if

# TAG: ntlm_user_format username|domainname+username
#      NTLM users format.
#
%if %%is_defined('ntlm_user_format') and %%ntlm_user_format != ''
ntlm_user_format %%ntlm_user_format
%end if

# TAG: realtime_refresh_time num sec
#      How many time to auto refresh the realtime report
#      0 = disable
#
#realtime_refresh_time 3
%if %%is_defined('realtime_refresh_time') and %%realtime_refresh_time != ''
realtime_refresh_time %%realtime_refresh_time
%end if

# TAG: realtime_access_log_lines num
#      How many last lines to get from access.log file 
#
# realtime_access_log_lines 1000
%if %%is_defined('realtime_access_log_lines') and %%realtime_access_log_lines != ''
realtime_access_log_lines %%realtime_access_log_lines
%end if

# TAG: realtime_types: GET,PUT,CONNECT,ICP_QUERY,POST
#      Which records must be in realtime report.
#
# realtime_types GET,PUT,CONNECT  
%if %%is_defined('realtime_types') and %%realtime_types != ''
realtime_types %%realtime_types
%end if

# TAG: realtime_unauthenticated_records: ignore|show
#      What to do with unauthenticated records in realtime report.
#
# realtime_unauthenticated_records: ignore
%if %%is_defined('realtime_unauthenticated_records') and %%realtime_unauthenticated_records != ''
realtime_unauthenticated_records %%realtime_unauthenticated_records
%end if

# TAG: byte_cost value no_cost_limit
#      Cost per byte.
#      Eg. byte_cost 0.01 100000000
#           per byte cost      = 0.01
#           bytes with no cost = 100 Mb
#      0 = disable
#
# byte_cost 0.01 50000000
%if %%is_defined('byte_cost') and %%byte_cost != ''
byte_cost %%byte_cost
%end if
