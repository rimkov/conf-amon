<?xml version="1.0" encoding="utf-8"?>

<creole>
    <files>
        <service servicelist='nufw'>nufw</service>
        <service servicelist='nufw'>nuauth</service>
        <file filelist='nufw' name='/etc/default/nufw'/>
        <file filelist='nufw' name='/etc/init.d/nufw' source='nufw.init' mode='755'/>
        <!--<file name='/etc/nsswitch.conf' source='nuauth.nsswitch'/>-->
        <file filelist='nufw' name='/etc/default/nuauth'/>
        <file filelist='nufw' name='/etc/nufw/nuauth.conf'/>
        <file filelist='nufw' name='/etc/pam.d/nuauth' source='nuauth.pamd'/>
    </files>
<!--************************************************************************************************* -->
    <variables>
        <family name='services'>
            <variable name='activer_client_ldap' redefine='True' hidden='True'>
                <value>non</value>
            </variable>
        </family>
        <family name='authentification'>
            <variable name='activer_nufw' type='oui/non' description="Activer l'authentification réseau (NuFW)">
                <value>non</value>
            </variable>
        </family>
        <family name='Interface-1'>
            <variable name='nuauth_eth1' type='oui/non' description="Activer l'authentification Nuauth sur cette interface">
                <value>non</value>
            </variable>
        </family>
        <family name='Interface-2'>
            <variable name='nuauth_eth2' type='oui/non' description="Activer l'authentification Nuauth sur cette interface">
                <value>non</value>
            </variable>
        </family>
        <family name='Interface-3'>
            <variable name='nuauth_eth3' type='oui/non' description="Activer l'authentification Nuauth sur cette interface">
                <value>non</value>
            </variable>
        </family>
        <family name='Interface-4'>
            <variable name='nuauth_eth4' type='oui/non' description="Activer l'authentification Nuauth sur cette interface">
                <value>non</value>
            </variable>
        </family>
        <family name='nufw' mode='expert'>
            <variable name='nuauth_verbosity' type='number' description='Niveau de verbosité du démon Nuauth' mode='expert'>
                <value>3</value>
            </variable>
            <variable name='nuauth_tls_key' type='string' description="Clef privée pour Nuauth" hidden='True'/>
            <variable name='nuauth_tls_cert' type='string' description="Certificat pour Nuauth" hidden='True'/>
            <variable name='nuauth_tls_cacert' type='string' description="Certification pour Nuauth" hidden='True'/>
        </family>
        <family name='client_ldap'>
            <variable name='adresse_ip_ldap' redefine='True' description="Adresse du serveur LDAP pour l'authentification NuFW" />
            <variable name='ldap_nss' redefine='True'>
                <value>oui</value>
            </variable>
        </family>
        <!-- FIXME EOLE-2.3 -->
        <!--<family name='sondes'>
            <variable name='sonde_nufw' type='oui/non' description="Activer sonde NuFW" >
                <value>non</value>
            </variable>
        </family>
        <separators>
            <separator name='sonde_nufw'>Configuration de la sonde NuFW</separator>
        </separators>-->
    </variables>
    <constraints>
        <!-- choix automatique du certificat à utilser (agriate ou auto-signé) -->
        <auto name='key_nuauth' target='nuauth_tls_key'/>
        <auto name='cert_nuauth' target='nuauth_tls_cert'/>
        <auto name='cacert_nuauth' target='nuauth_tls_cacert'/>
        <check name="valid_enum" target="nuauth_verbosity">
            <param>['1','2','3','4','5','6','7','8','9']</param>
        </check>
        <condition name='hidden_if_in' source='activer_nufw'>
            <param>non</param>
            <target type='family'>nufw</target>
            <target type='variable'>nuauth_eth1</target>
            <target type='variable'>nuauth_eth2</target>
            <target type='variable'>nuauth_eth3</target>
            <target type='variable'>nuauth_eth4</target>
            <target type='filelist'>nufw</target>
            <target type='servicelist'>nufw</target>
        </condition>
        <condition name='hidden_if_in' source='activer_nufw'>
            <param>non</param>
            <target type='family'>client_ldap</target>
        </condition>
    </constraints>
    <!--************************************************************************************************* -->
    <help>
    </help>
</creole>
<!-- vim: ts=4 sw=4 expandtab
-->
